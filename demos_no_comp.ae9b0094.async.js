(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"1T7h":function(e,t,a){},"3mSk":function(e,t,a){"use strict";a.r(t);var r=a("tJVT"),l=a("VygY"),n=a("q1tI"),i=a.n(n),o=e=>new l["a"].Stencil({title:"\u6d41\u7a0b\u56fe",target:e,stencilGraphWidth:200,stencilGraphHeight:180,collapsable:!0,groups:[{title:"\u57fa\u7840\u6d41\u7a0b\u56fe",name:"group1"},{title:"\u7cfb\u7edf\u8bbe\u8ba1\u56fe",name:"group2",graphHeight:200,layoutOptions:{rowHeight:70}},{title:"\u6d4b\u8bd5\u8bbe\u8ba1\u56fe",name:"group3"}],layoutOptions:{columns:2,columnWidth:80,rowHeight:55}}),c=o,s=a("k1fw"),d={groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top"},{group:"right"},{group:"bottom"},{group:"left"}]},u=()=>{l["c"].registerNode("custom-rect",{inherit:"rect",width:66,height:36,attrs:{body:{strokeWidth:1,stroke:"#5F95FF",fill:"#EFF4FF"},text:{fontSize:12,fill:"#262626"}},ports:Object(s["a"])({},d)},!0),l["c"].registerNode("custom-polygon",{inherit:"polygon",width:66,height:36,attrs:{body:{strokeWidth:1,stroke:"#5F95FF",fill:"#EFF4FF"},text:{fontSize:12,fill:"#262626"}},ports:Object(s["a"])(Object(s["a"])({},d),{},{items:[{group:"top"},{group:"bottom"}]})},!0),l["c"].registerNode("custom-circle",{inherit:"circle",width:45,height:45,attrs:{body:{strokeWidth:1,stroke:"#5F95FF",fill:"#EFF4FF"},text:{fontSize:12,fill:"#262626"}},ports:Object(s["a"])({},d)},!0),l["c"].registerNode("custom-image",{inherit:"rect",width:52,height:52,markup:[{tagName:"rect",selector:"body"},{tagName:"image"},{tagName:"text",selector:"label"}],attrs:{body:{stroke:"#5F95FF",fill:"#5F95FF"},image:{width:26,height:26,refX:13,refY:16},label:{refX:3,refY:2,textAnchor:"left",textVerticalAnchor:"top",fontSize:12,fill:"#fff"}},ports:Object(s["a"])({},d)},!0)},m=u,g=[{label:"Client",image:"https://gw.alipayobjects.com/zos/bmw-prod/687b6cb9-4b97-42a6-96d0-34b3099133ac.svg"},{label:"Http",image:"https://gw.alipayobjects.com/zos/bmw-prod/dc1ced06-417d-466f-927b-b4a4d3265791.svg"},{label:"Api",image:"https://gw.alipayobjects.com/zos/bmw-prod/c55d7ae1-8d20-4585-bd8f-ca23653a4489.svg"},{label:"Sql",image:"https://gw.alipayobjects.com/zos/bmw-prod/6eb71764-18ed-4149-b868-53ad1542c405.svg"},{label:"Clound",image:"https://gw.alipayobjects.com/zos/bmw-prod/c36fe7cb-dc24-4854-aeb5-88d8dc36d52e.svg"},{label:"Mq",image:"https://gw.alipayobjects.com/zos/bmw-prod/2010ac9f-40e7-49d4-8c4a-4fcf2f83033b.svg"}],p=e=>{m();var t=e.createNode({shape:"custom-rect",label:"\u5f00\u59cb",attrs:{body:{rx:20,ry:26}}}),a=e.createNode({shape:"custom-rect",label:"\u8fc7\u7a0b"}),r=e.createNode({shape:"custom-rect",attrs:{body:{rx:6,ry:6}},label:"\u53ef\u9009\u8fc7\u7a0b"}),l=e.createNode({shape:"custom-polygon",attrs:{body:{refPoints:"0,10 10,0 20,10 10,20"}},label:"\u51b3\u7b56"}),n=e.createNode({shape:"custom-polygon",attrs:{body:{refPoints:"10,0 40,0 30,20 0,20"}},label:"\u6570\u636e"}),i=e.createNode({shape:"custom-circle",label:"\u8fde\u63a5"}),o=g.map((t=>e.createNode({shape:"custom-image",label:t.label,attrs:{image:{"xlink:href":t.image}}}))),c=Array(6).fill(0).map(((t,a)=>e.createNode({shape:"custom-rect",label:a+1})));return{group1:[t,a,r,l,n,i],group2:o,group3:c}},b=p,h=e=>{e.bindKey(["meta+c","ctrl+c"],(()=>{var t=e.getSelectedCells();return t.length&&e.copy(t),!1})),e.bindKey(["meta+x","ctrl+x"],(()=>{var t=e.getSelectedCells();return t.length&&e.cut(t),!1})),e.bindKey(["meta+v","ctrl+v"],(()=>{if(!e.isClipboardEmpty()){var t=e.paste({offset:32});e.cleanSelection(),e.select(t)}return!1})),e.bindKey(["meta+z","ctrl+z"],(()=>(e.history.canUndo()&&e.history.undo(),!1))),e.bindKey(["meta+shift+z","ctrl+shift+z"],(()=>(e.history.canRedo()&&e.history.redo(),!1))),e.bindKey(["meta+a","ctrl+a"],(()=>{var t=e.getNodes();t&&e.select(t)})),e.bindKey("backspace",(()=>{var t=e.getSelectedCells();t.length&&e.removeCells(t)})),e.bindKey(["ctrl+1","meta+1"],(()=>{var t=e.zoom();t<1.5&&e.zoom(.1)})),e.bindKey(["ctrl+2","meta+2"],(()=>{var t=e.zoom();t>.5&&e.zoom(-.1)}))},f=h,v=a("xwZy"),y=(e,t)=>{for(var a=0,r=e.length;a<r;a+=1)e[a].style.visibility=t?"visible":"hidden"},E=e=>{e.on("node:mouseenter",(()=>{var e=document.getElementById("graph-container"),t=e.querySelectorAll(".x6-port-body");y(t,!0)})),e.on("cell:click",(e=>{console.log(e,"e"),v["a"].dispatchEvent({type:"config",data:{visible:!0,data:e}})})),e.on("node:mouseleave",(()=>{var e=document.getElementById("graph-container"),t=e.querySelectorAll(".x6-port-body");y(t,!1)}))},w=E,x=(a("Re5i"),a("/wGt")),O=(a("Y2jk"),a("zeV3")),j=(a("L/Qf"),a("2/Rp")),k=e=>{var t=e.config,a=(e.graph,()=>{var e=t.data.view;e instanceof l["d"]?e.cell.attr("label/text","orange"):e instanceof l["b"]&&e.cell.setLabels("labels"),r()}),r=()=>v["a"].dispatchEvent({type:"config",data:{visible:!1,data:{}}});return i.a.createElement(x["a"],{title:"test",width:500,visible:t.visible,closable:!1,footer:i.a.createElement(O["b"],null,i.a.createElement(j["a"],{type:"primary",onClick:a},"\u786e\u5b9a"),i.a.createElement(j["a"],{onClick:r},"\u53d6\u6d88")),onClose:r},"11111")},F=k,C=(a("6dhm"),()=>{var e=Object(n["useRef"])({graph:{}}),t=Object(n["useState"])({visible:!1,data:{}}),a=Object(r["a"])(t,2),o=a[0],s=a[1],d=e=>s(e.data);Object(n["useEffect"])((()=>{v["a"].addEventListener("config",d)}),[]);var u=()=>{var t=new l["c"]({container:document.getElementById("graph-container"),grid:!0,mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge(){return new l["e"].Edge({attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:0})},validateConnection(e){var t=e.targetMagnet;return!!t}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}},resizing:!0,rotating:!0,selecting:{enabled:!0,rubberband:!0,showNodeSelectionBox:!0},snapline:!0,keyboard:!0,clipboard:!0}),a=c(t);document.getElementById("stencil").appendChild(a.container),w(t),f(t);var r=b(t);Object.entries(r).forEach((e=>{a.load(e[1],e[0])})),e.current&&(e.current.graph=t)};return Object(n["useEffect"])((()=>{u()}),[]),i.a.createElement("div",{style:{height:500},id:"container"},i.a.createElement("div",{id:"stencil"}),i.a.createElement("div",{id:"graph-container"}),i.a.createElement(F,{config:o,graph:e.current.graph}))});t["default"]=C},"6dhm":function(e,t,a){},A5SN:function(e,t,a){"use strict";a.r(t);a("7W5+");var r=a("8z0m"),l=(a("L/Qf"),a("2/Rp")),n=(a("8/o9"),a("tsqr")),i=a("tJVT"),o=a("q1tI"),c=a.n(o),s={whiteSpace:"pre-wrap",height:400},d=()=>{var e=Object(o["useState"])([]),t=Object(i["a"])(e,2),a=t[0],d=t[1],u=Object(o["useState"])([]),m=Object(i["a"])(u,2),g=m[0],p=m[1],b=e=>{console.log(e,"file");var t=[...a],r="application/json"===e.type||"text/plain"===e.type;return r?(t.push(e),d(t),!1):(n["default"].error("\u6587\u4ef6\u4e0d\u7b26\u5408\u89c4\u5219"),!1)},h=e=>{var t=e.file,r=t.status;if("removed"===r){var l=a.indexOf(t),n=a.slice();n.splice(l,1),d(n)}},f=e=>{for(var t=[],a=[],r=function(r){t[r]=new Promise((t=>{a[r]=new FileReader,a[r].readAsText(e[r]),a[r].onload=()=>{t(a[r].result)}}))},l=0;l<e.length;l+=1)r(l);Promise.all(t).then((e=>{p(e),d([])}),(e=>{console.log(111)})).catch((e=>{console.log(222)}))},v=()=>{f(a)},y=(e,t)=>{console.log(e,"context");var a=new Blob([e]),r=document.createElement("a");r.href=URL.createObjectURL(a),r.style.display="none",r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)},E=()=>{g.forEach((e=>y(e,"".concat((new Date).getTime(),".json"))))};return c.a.createElement("div",null,c.a.createElement(r["a"],{beforeUpload:b,fileList:a,onChange:h},c.a.createElement(l["a"],null,"\u9009\u62e9\u6587\u4ef6")),c.a.createElement(l["a"],{onClick:v},"\u63d0\u4ea4"),c.a.createElement(l["a"],{style:{margin:8},onClick:E},"\u4e0b\u8f7d"),g.map((e=>c.a.createElement("pre",{style:s},e))))};t["default"]=d},FY7d:function(e,t,a){"use strict";a.r(t);a("L/Qf");var r=a("2/Rp"),l=a("q1tI"),n=a.n(l),i=a("xwZy"),o=null,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:450;o&&clearTimeout(o),o=setTimeout((()=>{e()}),t)},s=!0,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:450;s&&(s=!1,setTimeout((()=>{e(),s=!0}),t))},u=()=>{var e=1,t=e=>{i["a"].dispatchEvent({type:"myevent1",a:{test:e}})};return n.a.createElement("div",null,n.a.createElement("div",{style:{marginBottom:8}},"\u4e8b\u4ef6\u4e00\uff1a",n.a.createElement(r["a"].Group,null,n.a.createElement(r["a"],{onClick:()=>c((()=>t(e+=1)),800)},"\u9632\u6296\u89e6\u53d1+"),n.a.createElement(r["a"],{onClick:()=>d((()=>t(e-=1)),800)},"\u8282\u6d41\u89e6\u53d1-"))),n.a.createElement("div",null,"\u4e8b\u4ef6\u4e8c\uff1a",n.a.createElement(r["a"].Group,null,n.a.createElement(r["a"],{onClick:()=>i["a"].dispatchEvent({type:"myevent2"},!0)},"\u89e6\u53d1\u5b8c\u6210\u540e\u9500\u6bc1"))))};t["default"]=u},"H6/q":function(e,t,a){"use strict";a.r(t);a("Y2jk");var r=a("zeV3"),l=(a("L/Qf"),a("2/Rp")),n=a("q1tI"),i=a.n(n),o=a("o3yn");t["default"]=()=>{var e=Object(o["b"])("init"),t=e.count,a=e.plusCount,n=e.reduceCount;return i.a.createElement(r["b"],{direction:"vertical"},i.a.createElement(l["a"],{type:"primary"},t),i.a.createElement(r["b"],null,i.a.createElement(l["a"],{onClick:()=>a()},"\u6dfb\u52a0"),i.a.createElement(l["a"],{onClick:()=>n()},"\u5220\u51cf")))}},"II+T":function(e,t,a){"use strict";a.r(t);a("L/Qf");for(var r=a("2/Rp"),l=(a("QCje"),a("fyUT")),n=(a("tULf"),a("Vl3Y")),i=(a("8QGh"),a("2fM7")),o=(a("K4yd"),a("9yH6")),c=a("tJVT"),s=a("q1tI"),d=a.n(s),u=a("TSYQ"),m=a.n(u),g=[],p=0;p<9;p++)g.push({port:"800".concat(p),maxReq:p});var b=a("lyRx"),h=a.n(b),f={width:100},v=Object(s["forwardRef"])(((e,t)=>{var a=e.list,r=e.changeMaxReq,l=e.portValue,n=e.onChange,u=e.getFieldValue,g=Object(s["useState"])(l),p=Object(c["a"])(g,2),b=p[0],v=p[1],y=u("port"),E=(e,t)=>{r(t.key),v(e)};return Object(s["useEffect"])((()=>{a.findIndex((e=>e.port===y))<7&&v(l)}),[y]),d.a.createElement(d.a.Fragment,null,d.a.createElement(o["a"].Group,{onChange:n,value:y,defaultValue:l,ref:t,buttonStyle:"solid"},a.filter(((e,t)=>t<7)).map(((e,t)=>d.a.createElement(o["a"].Button,{onClick:()=>r(t),key:e.port,value:e.port},e.port))),d.a.createElement(i["a"],{onSelect:E,className:m()({[h.a.selcetStyle]:a.filter(((e,t)=>t>=7)).map((e=>e.port)).includes(y),[h.a.defaultSelectStyle]:!0}),value:b,style:f,onChange:n},d.a.createElement(i["a"].Option,{key:0,value:l},"\u9009\u62e9\u7aef\u53e3"),a.filter(((e,t)=>t>=7)).map(((e,t)=>d.a.createElement(i["a"].Option,{key:t+7,value:e.port},e.port))))))})),y=()=>{var e=Object(s["useState"])({}),t=Object(c["a"])(e,2),a=t[0],i=t[1],o=n["a"].useForm(),u=Object(c["a"])(o,1),m=u[0],p=Object(s["useRef"])(null),b=e=>{i(e)},h=e=>{m.setFieldsValue({maxReq:g[e].maxReq})};return d.a.createElement(d.a.Fragment,null,d.a.createElement(n["a"],{onFinish:b,initialValues:{port:g[0].port,maxReq:g[0].maxReq},form:m},d.a.createElement(n["a"].Item,{name:"port",rules:[{required:!0}]},d.a.createElement(v,{ref:p,getFieldValue:m.getFieldValue,portValue:g[0].port,list:g,changeMaxReq:h})),d.a.createElement(n["a"].Item,{name:"maxReq"},d.a.createElement(l["a"],null)),d.a.createElement(r["a"],{htmlType:"submit"},"\u63d0\u4ea4")),d.a.createElement("div",null,JSON.stringify(a,null,2)))};t["default"]=y},J5Fj:function(e,t,a){"use strict";a.r(t);var r=a("q1tI"),l=a.n(r),n=a("xwZy"),i=Object(r["createContext"])(null),o=e=>{var t=e.children,a=e.initState,o=void 0===a?{}:a,c=Object.assign({},{graph:null},o.ref),s=Object(r["useRef"])(c),d=Object.assign({},{zoom:1,isEdit:!1},o.state),u=Object(r["useRef"])(d),m=Object(r["useRef"])(n["a"]);return l.a.createElement(i.Provider,{value:{ref:s,state:u,bus:m}},t)},c=o,s=a("MNGV"),d=a.n(s),u=(e,t)=>{var a=new d.a.Minimap({container:e.current,size:[150,100]}),r=t.current.getBoundingClientRect().width||500,l=t.current.getBoundingClientRect().height||500,n=new d.a.Graph({container:t.current,width:r,height:l,maxZoom:1,modes:{default:["drag-canvas","activate-relations"]},layout:{type:"dagre",controlPoints:!0,ranksep:40,nodesep:50},defaultNode:{size:20},defaultEdge:{type:"editLine",style:{endArrow:{path:"M 0,0 L 6,-4 L 6,4 Z"},fill:"#666",stroke:"#333",lineWidth:2}},plugins:[a]});return n.data({nodes:[{id:"1",isDelete:"not",nodeType:"begin",label:"\u5f00\u59cb"},{id:"2",isDelete:"not",nodeType:"end",label:"\u7ed3\u675f"}],edges:[{source:"1",target:"2",label:"222",type:"editLine"}]}),n.render(),n.fitView(0),n},m=a("4Awp"),g=a.n(m),p=180,b=50;function h(e){d.a.registerEdge("editLine",{draw(t,a){var r=t.startPoint||{x:0,y:0},l=t.endPoint||{x:0,y:0},n=a.addShape("path",{attrs:{stroke:"#333",fill:"#666",lineWidth:2,endArrow:{path:"M 0,0 L 6,-4 L 6,4 Z",fill:"#666"},path:[["M",null===r||void 0===r?void 0:r.x,null===r||void 0===r?void 0:r.y],["L",null===l||void 0===l?void 0:l.x,null===l||void 0===l?void 0:l.y]]},name:"path-shape"});if(!e.isEdit){var i=t.label;if(i){var o=new g.a.Text({attrs:{x:0,y:0,text:i}}).getBBox(),c=o.width;a.addShape("rect",{attrs:{x:(r.x+l.x)/2-c/2,y:(r.y+l.y)/2-10,width:c,height:20,fill:"#eee",stroke:"#fff"}}),a.addShape("text",{attrs:{x:(r.x+l.x)/2,y:(r.y+l.y)/2,text:i||"",textAlign:"center",textBaseline:"middle",fill:"red",stroke:"#fff"}})}return n}return a.addShape("circle",{attrs:{x:(r.x+l.x)/2,y:(r.y+l.y)/2,r:10,stroke:"#52C41A",fill:"#fff",lineDash:[4],cursor:"pointer"},className:"addNode"}),a.addShape("text",{attrs:{x:(r.x+l.x)/2,y:(r.y+l.y)/2,textAlign:"center",textBaseline:"middle",fill:"#52C41A",fontSize:14,text:"+",cursor:"pointer"},className:"addNode"}),n},afterDraw(e,t){}})}function f(e){d.a.registerNode("baseNode",{draw(e,t){var a=e.label,r=t.addShape("rect",{attrs:{x:-p/2,y:0,width:p,height:b,fill:"#fff",stroke:"blue",radius:4,anchorPoints:[[0,1],[.5,1]]}});return t.addShape("text",{attrs:{x:0,y:b/2,text:a,fill:"#000",textAlign:"center",textBaseline:"middle"}}),r},getAnchorPoints(){return[[.5,0],[.5,1]]}})}var v=e=>{h(e),f(e)},y=v,E=(a("qNb/"),a("PArb")),w=(a("MKzF"),a("kaz8")),x=a("tJVT"),O=()=>{var e=Object(r["useContext"])(i),t=e.ref.current,a=e.state.current,n=Object(r["useState"])(a.isEdit),o=Object(x["a"])(n,2),c=o[0],s=o[1],d=e=>{s(e.target.checked),a.isEdit=e.target.checked,t.graph.refresh()};return l.a.createElement("div",null,l.a.createElement(w["a"],{onChange:d,checked:c,defaultChecked:!1},"\u662f\u5426\u7f16\u8f91"),l.a.createElement(E["a"],{type:"vertical"}))},j=O,k=(a("1vPl"),a("5rEg")),F=a("k1fw"),C=(a("tULf"),a("Vl3Y")),S=(a("Re5i"),a("/wGt")),N=(a("L/Qf"),a("2/Rp")),I=e=>{var t=e.title,a=e.visible,r=e.onClose,n=e.children,i=e.onFinish;return l.a.createElement(S["a"],{title:t,visible:a,width:500,onClose:r,footer:l.a.createElement("div",{style:{textAlign:"left"}},l.a.createElement(N["a"],{onClick:r,style:{marginRight:8}},"\u53d6\u6d88"),l.a.createElement(N["a"],{onClick:i,type:"primary"},"\u786e\u5b9a"))},n)},P=I,L=()=>{var e=Object(r["useContext"])(i),t=e.ref.current,a=e.state.current,n=C["a"].useForm(),o=Object(x["a"])(n,1),c=o[0],s=Object(r["useState"])({visible:!1,title:"editNode"}),d=Object(x["a"])(s,2),u=d[0],m=d[1],g=Object(r["useState"])({}),p=Object(x["a"])(g,2),b=p[0],h=p[1],f=()=>{t.graph.on("node:click",(e=>{var t=e.item;a.isEdit||(h(t),m({visible:!0,title:"editNode"}),c.setFieldsValue({label:t.getModel().label}))})),t.graph.on("edge:click",(e=>{var t=e.item,r=e.target,l=r.cfg,n=void 0===l?{}:l;"addNode"===n.className||a.isEdit||(m({visible:!0,title:"editEdge"}),h(t),c.setFieldsValue({label:t.getModel().label}))}))};Object(r["useEffect"])((()=>{f()}),[]);var v=()=>{c.validateFields().then((e=>{t.graph.updateItem(b,{label:e.label}),m(Object(F["a"])(Object(F["a"])({},u),{},{visible:!1}))})).catch((e=>{throw new Error(e)}))},y=()=>{c.resetFields(),m(Object(F["a"])(Object(F["a"])({},u),{},{visible:!1}))};return l.a.createElement(P,{title:D[u.title],visible:u.visible,onClose:y,onFinish:v},l.a.createElement(C["a"],{form:c,initialValues:{label:""}},l.a.createElement(C["a"].Item,{label:"Label",shouldUpdate:!0,name:"label"},l.a.createElement(k["a"],null))))},R=L,B=(a("2WkQ"),a("BvKs")),V=()=>{var e=Object(r["useContext"])(i),t=e.ref.current,a=e.state.current,n=Object(r["useState"])(!1),o=Object(x["a"])(n,2),c=o[0],s=o[1],d=Object(r["useState"])({}),u=Object(x["a"])(d,2),m=u[0],g=u[1],p=Object(r["useState"])({}),b=Object(x["a"])(p,2),h=b[0],f=b[1];Object(r["useEffect"])((()=>{t.graph.on("click",(()=>{s(!1)})),t.graph.on("node:contextmenu",(e=>{e.originalEvent.preventDefault();var r=e.item,l=r.getModel();if(!l.isDelete&&a.isEdit){var n=r.getBBox(),i=n.maxX,o=n.maxY;console.log(n,"pointBBox");var c=t.graph.getCanvasByPoint(i,o);g(c),s(!0),f(r)}})),t.graph.on("node:click",(e=>{e.originalEvent.preventDefault();var t=e.item,a=e.target,r=a.cfg,l=void 0===r?{}:r;"deleteNode"===l.name&&v(t)}))}),[]);var v=e=>{t.graph.setAutoPaint(!1);var a=e.getInEdges()[0].getModel(),r=e.getOutEdges()[0].getModel().target;t.graph.addItem("edge",{shape:"editLine",label:a.label,source:a.source,target:r}),e.getEdges().forEach((e=>{t.graph.removeItem(e)})),t.graph.removeItem(e),t.graph.setAutoPaint(!0),s(!1),t.graph.changeData(t.graph.save())},y=e=>{e._;var t=e.key;switch(t){case"delete":v(h);case"copy":default:}};return l.a.createElement(l.a.Fragment,null,c&&l.a.createElement(B["a"],{style:{width:100,position:"absolute",boxShadow:"0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09)",left:m.x,top:m.y},mode:"vertical",onSelect:y},l.a.createElement(B["a"].Item,{key:"delete"},"\u5220\u9664")))},A=V,q=(a("8QGh"),a("2fM7")),M=()=>{var e=Object(r["useContext"])(i),t=e.ref.current,a=C["a"].useForm(),n=Object(x["a"])(a,1),o=n[0],c=Object(r["useState"])({visible:!1,title:"addNode"}),s=Object(x["a"])(c,2),d=s[0],u=s[1],m=Object(r["useState"])({}),g=Object(x["a"])(m,2),p=g[0],b=g[1],h=()=>{t.graph.on("edge:click",(e=>{var t=e.item,a=e.target,r=void 0===a?{}:a,l=r.cfg,n=void 0===l?{}:l;"addNode"===n.className&&(b(t),u({title:"addNode",visible:!0}))}))};Object(r["useEffect"])((()=>{h()}),[]);var f=()=>{o.validateFields().then((e=>{var a=String((new Date).getTime());t.graph.setAutoPaint(!1),t.graph.addItem("node",{type:e.type,label:e.label,id:a}),t.graph.addItem("edge",{shape:"editLine",source:p.getSource().getModel().id,label:p.getModel().label,target:a}),t.graph.addItem("edge",{shape:"editLine",source:a,target:p.getTarget().getModel().id}),t.graph.removeItem(p),t.graph.setAutoPaint(!0),t.graph.changeData(t.graph.save()),u(Object(F["a"])(Object(F["a"])({},d),{},{visible:!1})),o.resetFields()})).catch((e=>{throw new Error(e)}))},v=()=>{o.resetFields(),u(Object(F["a"])(Object(F["a"])({},d),{},{visible:!1}))};return l.a.createElement(P,{title:D[d.title],visible:d.visible,onClose:v,onFinish:f},l.a.createElement(C["a"],{form:o,initialValues:{label:"",type:"baseNode"}},l.a.createElement(C["a"].Item,{label:"Label",shouldUpdate:!0,name:"label"},l.a.createElement(k["a"],null)),l.a.createElement(C["a"].Item,{label:"Type",shouldUpdate:!0,name:"type"},l.a.createElement(q["a"],null,l.a.createElement(q["a"].Option,{value:"baseNode"},"\u77e9\u578b"),l.a.createElement(q["a"].Option,{value:"circle"},"\u5706\u5f62"),l.a.createElement(q["a"].Option,{value:"diamond"},"\u83f1\u5f62")))))},z=M,D={editNode:"\u4fee\u6539\u8282\u70b9\u4fe1\u606f",editEdge:"\u4fee\u6539\u7ebf\u6761\u4fe1\u606f",addNode:"\u6dfb\u52a0\u8282\u70b9"},T=(a("1T7h"),()=>{var e=Object(r["useContext"])(i),t=e.ref.current,a=e.state.current,n=e.bus.current,o=Object(r["useRef"])(null),c=Object(r["useRef"])(null);return Object(r["useLayoutEffect"])((()=>(t.graph?t.graph.destroy():t.graph=u(o,c),()=>{t.graph.destroy(),t.graph=null,a.isEdit=!1})),[]),Object(r["useEffect"])((()=>{y(a)}),[]),Object(r["useEffect"])((()=>{var e=()=>console.log(111);return n.addEventListener("show",e),()=>{n.removeEventListener("show",e)}}),[]),l.a.createElement("div",null,l.a.createElement(j,null),l.a.createElement("div",{style:{position:"relative"},ref:o},l.a.createElement("div",{ref:c}),l.a.createElement(A,null)),l.a.createElement(R,null),l.a.createElement(z,null))}),K=l.a.memo(T),G=()=>l.a.createElement(c,null,l.a.createElement(K,null));t["default"]=G},NWtc:function(e,t,a){"use strict";a.r(t);a("1vPl");var r=a("5rEg"),l=(a("tULf"),a("Vl3Y")),n=a("tJVT"),i=a("q1tI"),o=a.n(i),c=()=>{var e=l["a"].useForm(),t=Object(n["a"])(e,1),a=t[0],i=[{name:"id1",label:"xx1",rules:[{required:!0,whitespace:!0,message:"xxxx"}],required:!0,children:o.a.createElement(r["a"],null)},{name:"id2",label:"xx2",rules:[],required:!1,children:o.a.createElement(r["a"],null)}];return o.a.createElement(l["a"],{layout:"vertical",form:a},i.map((e=>o.a.createElement(l["a"].Item,e))))};t["default"]=c},"Ok/L":function(e,t,a){"use strict";a.r(t);var r=a("0Owb"),l=(a("1vPl"),a("5rEg")),n=(a("L/Qf"),a("2/Rp")),i=a("k1fw"),o=a("tJVT"),c=(a("GRva"),a("gK9i")),s=(a("tULf"),a("Vl3Y")),d=(a("AUBz"),a("ZTPi")),u=a("q1tI"),m=a.n(u),g=a("4i/N"),p=a("YoJ3"),b=[{id:1209,teamName:"test",enble:1,authGroupId:1996,type:"fild",value:111,optionter:"in"},{id:1208,teamName:"test",enble:1,authGroupId:1996,type:"fild",value:111,optionter:"in"},{id:3056,teamName:"test",enble:0,authGroupId:2030,type:"fild",value:111,optionter:"in"},{id:30526,teamName:"test",enble:0,authGroupId:2030,type:"fild",value:111,optionter:"in"},{id:30256,teamName:"test",enble:0,authGroupId:20230,type:"fild",value:111,optionter:"in"}],h={id:"1119",dataId:"123wqeeq",enble:1},f={},v=[];b.forEach((e=>{f[e.authGroupId]?v.forEach((t=>{t.id===e.authGroupId&&t.ruleItems.push(Object(i["a"])({},e))})):(f[e.authGroupId]=e.authGroupId,v.push({authGroupId:h.id,id:e.authGroupId,ruleItems:[e]}))}));h.id,h.dataId,h.enble;var y=[{class:"class1",teamName:"class1-team1",teamPosition:"aaaaa",id:"vRZSjfDDDBndTeGx",teams:[{axis:[{row:"one",column:"80"},{row:"two",column:"12200"},{column:"12222"}],teamPosition:"test1"},{axis:[{row:"one",column:"80"},{row:"two",column:"12200"}],teamPosition:"test2"},{axis:[{row:"one",column:"80"},{row:"two",column:"12200"}],teamPosition:"test3"}]},{class:"class2",teamName:"class2-team1",teamPosition:"bbbbb",id:"4XuIiPRjKMQFpI53",teams:[{axis:[{row:"one",column:"80"},{row:"two",column:"12200"},{column:"12222"}],teamPosition:"bbb1"},{axis:[{row:"one",column:"80"},{row:"two",column:"12200"}],teamPosition:"bbb2"},{axis:[{row:"one",column:"80"},{row:"two",column:"12200"}],teamPosition:"bbb3"}]},{class:"calss3",teamName:"calss3-team1",teamPosition:"ccccc",id:"3o3ZCXdLaEXChDl8",teams:[{axis:[{row:"one",column:"80"},{row:"two",column:"12200"},{column:"12222"}],teamPosition:"ccc1"},{axis:[{row:"one",column:"80"},{row:"two",column:"12200"}],teamPosition:"ccc2"},{axis:[{row:"one",column:"80"},{row:"two",column:"12200"}],teamPosition:"ccc3"}]}],E=(a("Jmwx"),a("BMrR")),w=(a("8QGh"),a("2fM7")),x=a("/MfK"),O=s["a"].Item,j=s["a"].List,k=c["a"].Panel,F={labelCol:{span:2},wrapperCol:{span:14}},C={labelCol:{span:4},wrapperCol:{span:16}},S=e=>{var t=e.parentIndex,a=e.collapseIndex;return m.a.createElement(j,Object(r["a"])({},F,{name:[a,"axis"]}),((e,i)=>{var o=i.add,c=i.remove;return m.a.createElement(m.a.Fragment,null,e.map((e=>m.a.createElement(E["a"],{style:{width:"100%"},key:e.key},m.a.createElement(O,Object(r["a"])({style:{width:"40%"},rules:[{required:!0,message:"\u8bf7\u9009\u62e9"},e=>{var r=e.getFieldValue;return{validator(e,l){if(!l)return Promise.resolve();var n=r(["grades",t,"teams",a,"axis"]).map((e=>e.row)),i=n.findIndex((e=>e===l));n.splice(i,1);var o=Promise.resolve();return n.forEach((e=>{e===l&&(o=Promise.reject("\u6392\u540d\u79f0\u91cd\u590d"))})),o}}}]},C,{label:"\u6392",initialValue:"",fieldKey:[e.fieldKey,"row"],name:[e.name,"row"]}),m.a.createElement(w["a"],null,m.a.createElement(w["a"].Option,{value:"one"},"\u7b2c\u4e00\u6392"),m.a.createElement(w["a"].Option,{value:"two"},"\u7b2c\u4e8c\u6392"),m.a.createElement(w["a"].Option,{value:"three"},"\u7b2c\u4e09\u6392"))),m.a.createElement(O,{shouldUpdate:!0,noStyle:!0},(n=>{var i=n.getFieldValue,o="three"===i(["grades",t,"teams",a,"axis",e.name,"row"]);return m.a.createElement(O,Object(r["a"])({style:{width:"40%"},rules:[{required:!o&&!0,message:"\u8bf7\u586b\u5199"}]},C,{label:"\u5217",fieldKey:[e.fieldKey,"column"],name:[e.name,"column"]}),m.a.createElement(l["a"],{disabled:o}))})),m.a.createElement(O,null,m.a.createElement(x["a"],{onClick:()=>c(e.name)}))))),m.a.createElement(n["a"],{type:"dashed",style:{marginTop:8,width:"50%"},onClick:()=>o()},"\u6dfb\u52a0"))}))},N=e=>{var t=e.parentIndex;return m.a.createElement(j,Object(r["a"])({},F,{name:["grades",t,"teams"]}),((e,a)=>{var i=a.add,o=a.remove;return m.a.createElement(m.a.Fragment,null,e.map(((e,a)=>m.a.createElement(c["a"],{style:{marginBottom:24},defaultActiveKey:["".concat(e.fieldKey)],key:e.fieldKey},m.a.createElement(k,{forceRender:!0,extra:m.a.createElement(g["a"],{onClick:()=>o(e.name)}),header:m.a.createElement(O,Object(r["a"])({style:{marginBottom:0,width:"50%",display:"inline-flex"},rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5c0f\u7ec4\u540d\u79f0"}]},C,{label:"\u5c0f\u7ec4\u540d\u79f0",name:[e.name,"teamName"],fieldKey:[e.fieldKey,"teamName"]}),m.a.createElement(l["a"],{placeholder:"\u8bf7\u586b\u5199\u5c0f\u7ec4\u540d\u79f0",onClick:e=>e.stopPropagation(),addonBefore:"\u5c0f\u7ec4\u540d\u79f0"})),key:"".concat(e.fieldKey)},m.a.createElement(O,Object(r["a"])({rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5c0f\u7ec4\u4f4d\u7f6e"}]},F,{label:"\u5c0f\u7ec4\u4f4d\u7f6e",name:[e.name,"teamPosition"],fieldKey:[e.fieldKey,"teamPosition"]}),m.a.createElement(l["a"],{placeholder:"\u8bf7\u586b\u5199\u5c0f\u7ec4\u4f4d\u7f6e"})),m.a.createElement(O,Object(r["a"])({style:{position:"absolute"},initialValue:"NONE"},F,{name:[a,"type"]}),m.a.createElement(l["a"],{hidden:!0})),m.a.createElement(S,{parentIndex:t,collapseIndex:a}))))),m.a.createElement(n["a"],{type:"dashed",style:{marginTop:8,width:"100%"},onClick:()=>i({axis:[{}]})},"\u6dfb\u52a0"))}))},I=N,P=d["a"].TabPane,L=s["a"].Item,R=(s["a"].List,c["a"].Panel,[{title:"",teams:[{axis:[{}]}]},{title:"",teams:[{axis:[{}]}]}]),B=()=>{var e=Object(u["useState"])({}),t=Object(o["a"])(e,2),a=t[0],c=t[1],b=Object(u["useState"])(!1),h=Object(o["a"])(b,2),f=h[0],v=h[1],E=Object(p["a"])(R),w=E.list,x=E.push,O=E.remove,j=E.getKey,k=E.resetList,F=s["a"].useForm(),C=Object(o["a"])(F,1),S=C[0],N=()=>{S.validateFields().then((e=>{console.log(e,"form");var t=[];e.grades.forEach((e=>{e.teams.filter((e=>e)).forEach((a=>{t.push({class:e.class,teamName:a.teamName,teamPosition:a.teamPosition,teams:{axis:a.axis,type:a.type}})}))}));var a={configKey:"test",param:{grades:t}};c(a),console.log(a,"params")}))};Object(u["useEffect"])((()=>{if(f){k(y);var e=[];y.forEach((t=>{var a=[];t.teams.forEach((e=>a.push(Object(i["a"])(Object(i["a"])({},e),{},{teamName:t.teamName,teamPosition:t.teamPosition})))),console.log(a,"teams"),e.push({class:t.class,teams:a})})),S.setFieldsValue({grades:e})}else S.setFieldsValue({grades:R}),k(R)}),[f]);var B=()=>{x({title:"",teams:[{axis:[{}]}]});var e=S.getFieldValue("grades");e.push({teams:[{axis:[{}]}]}),S.setFieldsValue({grades:e})},V={labelCol:{span:2},wrapperCol:{span:14}};return m.a.createElement(m.a.Fragment,null,m.a.createElement(n["a"],{style:{marginBottom:8},type:"primary",onClick:()=>v(!f)},"\u5207\u6362",f?"\u65b0\u589e":"\u7f16\u8f91"),m.a.createElement(s["a"],Object(r["a"])({},V,{labelCol:{span:2},form:S}),m.a.createElement(d["a"],{type:"editable-card",hideAdd:!0,tabBarExtraContent:m.a.createElement(n["a"],{onClick:B},"\u6dfb\u52a0")},w.map(((e,t)=>m.a.createElement(P,{forceRender:!0,key:"".concat(j(t)),closeIcon:m.a.createElement(g["a"],{onClick:()=>O(t)}),tab:"\u73ed\u7ea7 ".concat(j(t)+1)},m.a.createElement(L,Object(r["a"])({},V,{label:"\u73ed\u7ea7",name:["grades",j(t),"class"],rules:[{required:!0,message:"\u8bf7\u586b\u5199\u73ed\u7ea7"}]}),m.a.createElement(l["a"],{placeholder:"\u8bf7\u586b\u5199\u73ed\u7ea7"})),m.a.createElement(I,{parentIndex:j(t)})))))),m.a.createElement(n["a"],{type:"primary",style:{marginTop:8,width:"100%"},onClick:N},"\u63d0\u4ea4"),Object.keys(a).length>0&&m.a.createElement("pre",null,JSON.stringify(a,null,"\t")))};t["default"]=B},UyYS:function(e,t,a){"use strict";a.r(t);a("Y2jk");var r=a("zeV3"),l=(a("L/Qf"),a("2/Rp")),n=a("tJVT"),i=a("q1tI"),o=a.n(i),c=a("k1fw"),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i["useState"])(e),a=Object(n["a"])(t,2),r=a[0],l=a[1],o=Object(i["useCallback"])((e=>{l((t=>Object(c["a"])(Object(c["a"])({},t),"function"===typeof e?e(t):e)))}),[]);return[r,o]},d=s;t["default"]=()=>{var e=d({hello:"",count:0}),t=Object(n["a"])(e,2),a=t[0],i=t[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("pre",null,JSON.stringify(a,null,2)),o.a.createElement(r["b"],null,o.a.createElement(l["a"],{onClick:()=>i({hello:"hello"})},"say hello"),o.a.createElement(l["a"],{onClick:()=>i({world:"world"})},"say word"),o.a.createElement(l["a"],{onClick:()=>i((e=>({count:e.count+1})))},"count + 1")))}},lyRx:function(e,t,a){e.exports={selcetStyle:"selcetStyle___1eFP0",defaultSelectStyle:"defaultSelectStyle___1wX0S"}},"we/j":function(e,t,a){"use strict";a.r(t);var r=a("q1tI"),l=a.n(r),n=a("MNGV"),i=a.n(n),o={nodes:[{id:"0",label:"0",cluster:"0"},{id:"1",label:"1",cluster:"0"},{id:"2",label:"2",cluster:"0"},{id:"3",label:"3",cluster:"0"},{id:"4",label:"4",cluster:"0"},{id:"5",label:"5",cluster:"3"},{id:"6",label:"6",cluster:"0"},{id:"7",label:"7",cluster:"0"},{id:"8",label:"8",cluster:"0"},{id:"9",label:"9",cluster:"3"},{id:"10",label:"10",cluster:"3"},{id:"11",label:"11",cluster:"2"},{id:"12",label:"12",cluster:"2"},{id:"13",label:"13",cluster:"4"},{id:"14",label:"14",cluster:"2"},{id:"15",label:"15",cluster:"2"},{id:"16",label:"16",cluster:"2"},{id:"17",label:"17",cluster:"1"},{id:"18",label:"18",cluster:"4"},{id:"19",label:"19",cluster:"4"},{id:"20",label:"20",cluster:"4"},{id:"21",label:"21",cluster:"0"},{id:"22",label:"22",cluster:"2"},{id:"23",label:"23",cluster:"2"},{id:"24",label:"24",cluster:"2"},{id:"25",label:"25",cluster:"3"},{id:"26",label:"26",cluster:"4"},{id:"27",label:"27",cluster:"4"},{id:"28",label:"28",cluster:"1"},{id:"29",label:"29",cluster:"1"},{id:"30",label:"30",cluster:"4"},{id:"31",label:"31",cluster:"4"},{id:"32",label:"32",cluster:"1"},{id:"33",label:"33",cluster:"2"}],edges:[{source:"0",target:"1"},{source:"0",target:"2"},{source:"0",target:"3"},{source:"0",target:"4"},{source:"0",target:"5"},{source:"0",target:"7"},{source:"0",target:"8"},{source:"0",target:"9"},{source:"0",target:"10"},{source:"0",target:"11"},{source:"0",target:"13"},{source:"0",target:"14"},{source:"0",target:"15"},{source:"0",target:"16"},{source:"2",target:"3"},{source:"4",target:"5"},{source:"4",target:"6"},{source:"5",target:"6"},{source:"7",target:"13"},{source:"8",target:"14"},{source:"9",target:"10"},{source:"10",target:"22"},{source:"10",target:"14"},{source:"10",target:"12"},{source:"10",target:"24"},{source:"10",target:"21"},{source:"10",target:"20"},{source:"11",target:"24"},{source:"11",target:"22"},{source:"11",target:"14"},{source:"12",target:"13"},{source:"16",target:"17"},{source:"16",target:"18"},{source:"16",target:"21"},{source:"16",target:"22"},{source:"17",target:"18"},{source:"17",target:"20"},{source:"18",target:"19"},{source:"19",target:"20"},{source:"19",target:"33"},{source:"19",target:"22"},{source:"19",target:"23"},{source:"20",target:"21"},{source:"21",target:"22"},{source:"22",target:"24"},{source:"22",target:"25"},{source:"22",target:"26"},{source:"22",target:"23"},{source:"22",target:"28"},{source:"22",target:"30"},{source:"22",target:"31"},{source:"22",target:"32"},{source:"22",target:"33"},{source:"23",target:"28"},{source:"23",target:"27"},{source:"23",target:"29"},{source:"23",target:"30"},{source:"23",target:"31"},{source:"23",target:"33"},{source:"32",target:"33"}]},c=["#BDD2FD","#BDEFDB","#C2C8D5","#FBE5A2","#F6C3B7","#B6E3F5","#D3C6EA","#FFD8B8","#AAD8D8","#FFD6E7"],s=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"],d=(a("yanw"),()=>{var e=Object(r["useRef"])(null),t=Object(r["useRef"])(null),a=()=>{var a=o.nodes,r=new Map,l=0;a.forEach((function(e){e.cluster&&void 0===r.get(e.cluster)&&(r.set(e.cluster,l),l++);var t=r.get(e.cluster);e.style||(e.style={}),e.style.fill=c[t%c.length],e.style.stroke=s[t%s.length]}));var n=new i.a.Minimap({container:t.current,size:[150,100]}),d=e.current.getBoundingClientRect().width||500,u=e.current.getBoundingClientRect().height||500,m=new i.a.Graph({container:e.current,width:d,height:u,modes:{default:["zoom-canvas","drag-canvas","click-select","activate-relations"]},layout:{type:"dagre",controlPoints:!0,ranksep:20,nodesep:50},defaultNode:{size:20},defaultEdge:{type:"polyline",style:{radius:20,offset:45,endArrow:!0,lineWidth:2,stroke:"#C2C8D5"}},plugins:[n]});m.data(o),m.render()};return Object(r["useEffect"])((()=>{a()}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{height:500},ref:e}),l.a.createElement("div",{ref:t}))});t["default"]=d},xwZy:function(e,t,a){"use strict";var r=a("rAM+");class l{constructor(){if(this.eventMap=void 0,window&&window.EventBus)throw new Error("\u8fd9\u662f\u4e00\u4e2a\u5355\u4f8b\uff01");this.eventMap=new Map}dispatchEvent(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.eventMap.get(e.type);if(a){var l,n=Object(r["a"])(a.values());try{for(n.s();!(l=n.n()).done;){var i=l.value;i(e),t&&this.removeEventListener(e.type,i)}}catch(o){n.e(o)}finally{n.f()}}}addEventListener(e,t){var a=this.eventMap.get(e);if(a){var l,n=Object(r["a"])(a.values());try{for(n.s();!(l=n.n()).done;){var i=l.value;this.removeEventListener(e,i)}}catch(o){n.e(o)}finally{n.f()}a.add(t)}else a=new Set,a.add(t);this.eventMap.set(e,a)}removeEventListener(e,t){var a=this.eventMap.get(e);a&&a.delete(t)}}t["a"]=new l},yanw:function(e,t,a){},zVfD:function(e,t,a){"use strict";a.r(t);a("L/Qf");var r=a("2/Rp"),l=a("tJVT"),n=a("q1tI"),i=a.n(n),o=a("xwZy"),c=()=>{var e,t=i.a.useState(),a=Object(l["a"])(t,2),n=a[0],c=a[1],s=i.a.useCallback((e=>c(e)),[]),d=i.a.useCallback((e=>alert(JSON.stringify(e))),[]);i.a.useEffect((()=>(o["a"].addEventListener("myevent1",s),o["a"].addEventListener("myevent2",d),()=>{o["a"].removeEventListener("myevent1",s),o["a"].removeEventListener("myevent2",d)})),[]);var u=(e,t)=>{o["a"].removeEventListener(e,t)};return i.a.createElement("div",null,i.a.createElement(r["a"],{style:{marginRight:8},onClick:()=>u("myevent1",s)},"\u79fb\u9664\u4e8b\u4ef6\u4e00"),i.a.createElement(r["a"],{onClick:()=>u("myevent2",d)},"\u79fb\u9664\u4e8b\u4ef6\u4e8c"),i.a.createElement("div",null,(null===n||void 0===n||null===(e=n.a)||void 0===e?void 0:e.test)||"-"))};t["default"]=c}}]);